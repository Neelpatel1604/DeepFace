(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(4584),s=r(2292);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},519:(e,t,r)=>{Promise.resolve().then(r.bind(r,2045))},1832:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(3365),s=r(1521),n=r(544),o=r(2934),i=r(7);let l=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},2045:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(3365),s=r(627),n=r(2372),o=r(1521),i=r(4333),l=r(1832),c=r(3634);let d=[{id:"dlib",name:"Dlib (Smallest)",maxStrength:70},{id:"arcface",name:"ArcFace",maxStrength:85},{id:"facenet",name:"FaceNet",maxStrength:90},{id:"vggface2",name:"VGGFace2",maxStrength:100}];function u(e){let{onConnect:t}=e,[r,s]=(0,o.useState)("localhost:4455"),[u,h]=(0,o.useState)(""),[m,b]=(0,o.useState)("dlib"),[g,p]=(0,o.useState)({iterations:10,alpha:.01,epsilon:.1,targetArea:"face"}),f=i.A.getInstance(),x=async()=>{try{await f.connect(r,u)?(localStorage.setItem("protectionSettings",JSON.stringify({model:m,...g})),n.oR.success("Connected to OBS successfully!"),t(),await f.startVirtualCamera()):n.oR.error("Failed to connect to OBS")}catch(e){n.oR.error("Connection error: "+e.message)}};return(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800/50 p-6 rounded-lg backdrop-blur-sm border border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Connection Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"address",children:"Address"}),(0,a.jsx)("input",{id:"address",type:"text",value:r,onChange:e=>s(e.target.value),className:"w-full bg-gray-700 p-2 rounded border border-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"password",children:"Password"}),(0,a.jsx)("input",{id:"address",type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full bg-gray-700 p-2 rounded border border-gray-600"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800/50 p-6 rounded-lg backdrop-blur-sm border border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Protection Parameters"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"model",children:"Model"}),(0,a.jsx)("select",{id:"model",value:m,onChange:e=>b(e.target.value),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600",children:d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"iterations",children:"Iterations (1-50)"}),(0,a.jsx)("input",{id:"iterations",type:"number",min:"1",max:"50",value:g.iterations,onChange:e=>p({...g,iterations:Math.min(50,Math.max(1,parseInt(e.target.value)||1))}),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"alpha",children:"Alpha (Step Size)"}),(0,a.jsx)("input",{id:"alpha",type:"number",step:"0.001",min:"0.001",max:"0.1",value:g.alpha,onChange:e=>p({...g,alpha:parseFloat(e.target.value)}),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"targetArea",children:"Target Area"}),(0,a.jsxs)("select",{id:"targetArea",value:g.targetArea,onChange:e=>p({...g,targetArea:e.target.value}),className:"w-full bg-gray-700 text-white p-2 rounded border border-gray-600",children:[(0,a.jsx)("option",{value:"face",children:"Face Only"}),(0,a.jsx)("option",{value:"full",children:"Full Frame"}),(0,a.jsx)("option",{value:"custom",children:"Custom Region"})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(l.$,{onClick:x,className:"bg-blue-600 hover:bg-blue-700",children:"Connect and Continue"})})]})}function h(){let e=(0,s.useRouter)(),[t,r]=(0,o.useState)(!1);return(0,a.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white p-8",children:[(0,a.jsx)(n.l$,{position:"top-right"}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600 mb-8",children:"DeepFace"}),(0,a.jsx)(u,{onConnect:()=>{e.push("/comparison")}}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("button",{onClick:()=>{r(!t)},className:"text-blue-400 hover:text-blue-300 focus:outline-none",children:"Where do I find my password?"}),t&&(0,a.jsxs)("div",{className:"bg-gray-800 p-4 rounded-md mt-2",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Finding Your OBS WebSocket Password"}),(0,a.jsx)("p",{children:"1. Open OBS Studio."}),(0,a.jsx)("p",{children:'2. Go to "Tools" in the top menu.'}),(0,a.jsx)("p",{children:'3. Select "WebSocket Server Settings".'}),(0,a.jsx)("p",{children:'4. If "Enable Authentication" is checked, your password will be displayed in the "Server Password" field.'}),(0,a.jsx)("p",{children:'5. If "Enable Authentication" is not checked, you do not need a password.'})]})]})]})]})}},3634:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(3365),s=r(1521),n=r(2711),o=r(2934),i=r(7);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,i.cn)(l(),r),...s})});c.displayName=n.b.displayName},4333:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(9178);class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}setupEventListeners(){this.obs.on("ConnectionOpened",()=>{this.connectionStatus=!0,this.notifyStatusListeners()}),this.obs.on("ConnectionClosed",()=>{this.connectionStatus=!1,this.notifyStatusListeners()})}async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localhost:4455",t=arguments.length>1?arguments[1]:void 0;try{return this.currentPassword=t,await this.obs.connect("ws://".concat(e),t),!0}catch(e){return console.error("Failed to connect:",e),!1}}async disconnect(){try{return await this.obs.disconnect(),!0}catch(e){return console.error("Failed to disconnect:",e),!1}}isConnected(){return this.connectionStatus}addStatusListener(e){this.statusListeners.push(e)}removeStatusListener(e){this.statusListeners=this.statusListeners.filter(t=>t!==e)}notifyStatusListeners(){this.statusListeners.forEach(e=>e(this.connectionStatus))}async getScenes(){try{let{scenes:e}=await this.obs.call("GetSceneList");return e}catch(e){return console.error("Failed to get scenes:",e),[]}}async getCurrentScene(){try{let{currentProgramSceneName:e}=await this.obs.call("GetCurrentProgramScene");return e}catch(e){return console.error("Failed to get current scene:",e),null}}async applyProtectionFilter(e,t){try{let r=(await this.obs.call("GetSourceFilterList",{sourceName:e})).filters.some(e=>"DeepfakeProtection"===e.filterName),a={contrast:1+t.strength/200,brightness:1-t.strength/400,gamma:1+10*t.alpha,saturation:1+t.epsilon,hue_shift:t.iterations%360,opacity:1};return r?await this.obs.call("SetSourceFilterSettings",{sourceName:e,filterName:"DeepfakeProtection",filterSettings:a}):await this.obs.call("CreateSourceFilter",{sourceName:e,filterName:"DeepfakeProtection",filterKind:"color_filter_v2",filterSettings:a}),await this.obs.call("SetSourceFilterEnabled",{sourceName:e,filterName:"DeepfakeProtection",filterEnabled:!0}),!0}catch(e){return console.error("Failed to apply protection filter:",e),!1}}async removeProtectionFilter(e){try{try{await this.obs.call("SetSourceFilterEnabled",{sourceName:e,filterName:"DeepfakeProtection",filterEnabled:!1}),await this.obs.call("SetSourceFilterEnabled",{sourceName:e,filterName:"DeepfakeProtection_LUT",filterEnabled:!1})}catch(e){console.warn("Failed to disable filters:",e)}try{await this.obs.call("RemoveSourceFilter",{sourceName:e,filterName:"DeepfakeProtection"})}catch(e){console.warn("Failed to remove color filter:",e)}try{await this.obs.call("RemoveSourceFilter",{sourceName:e,filterName:"DeepfakeProtection_LUT"})}catch(e){console.warn("Failed to remove LUT filter:",e)}return!0}catch(e){return console.error("Failed to remove protection filters:",e),!1}}async startVirtualCamera(){try{return await this.obs.call("StartVirtualCam"),!0}catch(e){return console.error("Failed to start virtual camera:",e),!1}}async stopVirtualCamera(){try{return await this.obs.call("StopVirtualCam"),!0}catch(e){return console.error("Failed to stop virtual camera:",e),!1}}async getSceneSources(e){try{let{sceneItems:t}=await this.obs.call("GetSceneItemList",{sceneName:e});return t.map(e=>({sourceName:e.sourceName}))}catch(e){return console.error("Failed to get scene sources:",e),[]}}constructor(){this.connectionStatus=!1,this.statusListeners=[],this.obs=new a.Ay,this.setupEventListeners()}}let n=s},6305:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[762,347,870,358],()=>t(519)),_N_E=e.O()}]);